{% extends "auctions/layout.html" %}

{% block body %}
<div class="container-lg mt-4 listings-page">
    <h2 class="mb-5">{% block heading %} Active Listings {% endblock %}</h2>

    <div class="list-group">
        {% for item in listings %}
        <div class="list-group-item listing-item d-flex flex-column flex-md-row align-items-start border rounded shadow-sm mb-3">
            <img src="{{ item.image }}" alt="{{ item.title }} Image" class="listing-img me-md-4 mb-3 mb-md-0 rounded">
            <div class="flex-grow-1">
                <div class="fw-bold fs-5 mb-2">{{ item.title }}</div>
                <p class="mb-2 text-muted">{{ item.description }}</p>
                {% if item.category %}
                    <span class="badge bg-secondary mb-2">{{ item.category }}</span>
                {% endif %}
                <p class="fs-6 text-muted">{{ item.added_at }}</p>
            </div>
            <div class="mt-3 mt-md-0 text-md-end d-flex flex-md-column justify-content-between align-items-start align-items-md-end">
                <span class="text-success fw-bold fs-5 mb-2">
                    {% if item.highest_bid %}
                        $ {{ item.highest_bid }}
                    {% else %}
                        $ {{ item.starting_bid }}
                    {% endif %}
                </span>
                <a href="{% url 'product' item.id %}" class="btn btn-outline-primary btn-sm">View</a>
            </div>
        </div>
        {% empty %}
        <p class="text-center text-muted fst-italic">No Listings</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
